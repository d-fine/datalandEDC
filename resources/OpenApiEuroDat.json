{
  "openapi" : "3.0.1",
  "info" : {
    "title" : "EuroDat OpenAPI Spec",
    "version" : "0.0.1-SNAPSHOT"
  },
  "paths" : {
    "/definitions/all" : {
      "get" : {
        "operationId" : "getAllContractDefinitions",
        "responses" : {
          "default" : {
            "description" : "default response",
            "content" : {
              "application/json" : { }
            }
          }
        }
      },
      "delete" : {
        "operationId" : "delAllContractDefinitions",
        "responses" : {
          "default" : {
            "description" : "default response",
            "content" : {
              "application/json" : { }
            }
          }
        }
      }
    },
    "/definitions/{id}" : {
      "delete" : {
        "operationId" : "delContractDefinition",
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string"
          }
        } ],
        "responses" : {
          "default" : {
            "description" : "default response",
            "content" : {
              "application/json" : { }
            }
          }
        }
      }
    },
    "/asset/all" : {
      "delete" : {
        "operationId" : "deleteAllAssets",
        "parameters" : [ {
          "name" : "providerId",
          "in" : "query",
          "schema" : {
            "type" : "string"
          }
        } ],
        "responses" : {
          "default" : {
            "description" : "default response",
            "content" : {
              "application/json" : { }
            }
          }
        }
      }
    },
    "/asset/{id}" : {
      "get" : {
        "operationId" : "getAsset",
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string"
          }
        }, {
          "name" : "providerId",
          "in" : "query",
          "schema" : {
            "type" : "string"
          }
        } ],
        "responses" : {
          "default" : {
            "description" : "default response",
            "content" : {
              "application/json" : { }
            }
          }
        }
      },
      "delete" : {
        "operationId" : "deleteAsset",
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string"
          }
        }, {
          "name" : "providerId",
          "in" : "query",
          "schema" : {
            "type" : "string"
          }
        } ],
        "responses" : {
          "default" : {
            "description" : "default response",
            "content" : {
              "application/json" : { }
            }
          }
        }
      }
    },
    "/prepare" : {
      "post" : {
        "operationId" : "prepareData",
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/ConsumerRequest"
              }
            }
          }
        },
        "responses" : {
          "default" : {
            "description" : "default response",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/JsonNode"
                }
              }
            }
          }
        }
      }
    },
    "/asset/register" : {
      "post" : {
        "operationId" : "registerAsset",
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/ProviderRequest"
              }
            }
          }
        },
        "responses" : {
          "default" : {
            "description" : "default response",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/AssetResponse"
                }
              }
            }
          }
        }
      }
    },
    "/contract/get" : {
      "post" : {
        "operationId" : "requestAsset",
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/ConsumerRequest"
              }
            }
          }
        },
        "responses" : {
          "default" : {
            "description" : "default response",
            "content" : {
              "application/json" : { }
            }
          }
        }
      }
    },
    "/ids/description" : {
      "get" : {
        "operationId" : "selfDescription",
        "responses" : {
          "default" : {
            "description" : "default response",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "string"
                }
              }
            }
          }
        }
      }
    }
  },
  "components" : {
    "schemas" : {
      "JsonNode" : {
        "type" : "object"
      },
      "Action" : {
        "type" : "object",
        "properties" : {
          "type" : {
            "type" : "string"
          },
          "includedIn" : {
            "type" : "string"
          },
          "constraint" : {
            "$ref" : "#/components/schemas/Constraint"
          }
        }
      },
      "AssetSelectorExpression" : {
        "type" : "object",
        "properties" : {
          "criteria" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Criterion"
            }
          }
        }
      },
      "Constraint" : {
        "required" : [ "edctype" ],
        "type" : "object",
        "properties" : {
          "edctype" : {
            "type" : "string"
          }
        },
        "discriminator" : {
          "propertyName" : "edctype"
        }
      },
      "ConsumerRequest" : {
        "type" : "object",
        "properties" : {
          "participantId" : {
            "type" : "string"
          },
          "participantConnectorAddress" : {
            "type" : "string"
          },
          "contractDefinition" : {
            "$ref" : "#/components/schemas/ContractDefinition"
          }
        }
      },
      "ContractDefinition" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string"
          },
          "accessPolicy" : {
            "$ref" : "#/components/schemas/Policy"
          },
          "contractPolicy" : {
            "$ref" : "#/components/schemas/Policy"
          },
          "selectorExpression" : {
            "$ref" : "#/components/schemas/AssetSelectorExpression"
          }
        }
      },
      "Criterion" : {
        "type" : "object",
        "properties" : {
          "left" : {
            "type" : "object"
          },
          "op" : {
            "type" : "string"
          },
          "right" : {
            "type" : "object"
          }
        }
      },
      "Duty" : {
        "type" : "object",
        "properties" : {
          "uid" : {
            "type" : "string"
          },
          "target" : {
            "type" : "string"
          },
          "action" : {
            "$ref" : "#/components/schemas/Action"
          },
          "assignee" : {
            "type" : "string"
          },
          "assigner" : {
            "type" : "string"
          },
          "constraints" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Constraint"
            }
          },
          "parentPermission" : {
            "$ref" : "#/components/schemas/Permission"
          },
          "consequence" : {
            "$ref" : "#/components/schemas/Duty"
          }
        }
      },
      "Permission" : {
        "type" : "object",
        "properties" : {
          "uid" : {
            "type" : "string"
          },
          "target" : {
            "type" : "string"
          },
          "action" : {
            "$ref" : "#/components/schemas/Action"
          },
          "assignee" : {
            "type" : "string"
          },
          "assigner" : {
            "type" : "string"
          },
          "constraints" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Constraint"
            }
          },
          "duties" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Duty"
            }
          }
        }
      },
      "Policy" : {
        "type" : "object",
        "properties" : {
          "uid" : {
            "type" : "string"
          },
          "permissions" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Permission"
            }
          },
          "prohibitions" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Prohibition"
            }
          },
          "obligations" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Duty"
            }
          },
          "extensibleProperties" : {
            "type" : "object",
            "additionalProperties" : {
              "type" : "object"
            }
          },
          "inheritsFrom" : {
            "type" : "string"
          },
          "assigner" : {
            "type" : "string"
          },
          "assignee" : {
            "type" : "string"
          },
          "target" : {
            "type" : "string"
          },
          "@type" : {
            "type" : "string",
            "enum" : [ "SET", "OFFER", "CONTRACT" ]
          }
        }
      },
      "Prohibition" : {
        "type" : "object",
        "properties" : {
          "uid" : {
            "type" : "string"
          },
          "target" : {
            "type" : "string"
          },
          "action" : {
            "$ref" : "#/components/schemas/Action"
          },
          "assignee" : {
            "type" : "string"
          },
          "assigner" : {
            "type" : "string"
          },
          "constraints" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Constraint"
            }
          }
        }
      },
      "Asset" : {
        "type" : "object",
        "properties" : {
          "properties" : {
            "type" : "object",
            "additionalProperties" : {
              "type" : "object"
            }
          }
        }
      },
      "AssetResponse" : {
        "type" : "object",
        "properties" : {
          "asset" : {
            "$ref" : "#/components/schemas/Asset"
          },
          "contractDefinition" : {
            "$ref" : "#/components/schemas/ContractDefinition"
          }
        }
      },
      "ProviderRequest" : {
        "type" : "object",
        "properties" : {
          "participantId" : {
            "type" : "string"
          },
          "participantConnectorAddress" : {
            "type" : "string"
          },
          "ownerId" : {
            "type" : "string"
          },
          "contentType" : {
            "type" : "string"
          },
          "asset" : {
            "$ref" : "#/components/schemas/Asset"
          },
          "policy" : {
            "$ref" : "#/components/schemas/Policy"
          },
          "provider" : {
            "type" : "string",
            "format" : "uri"
          },
          "consumer" : {
            "type" : "string",
            "format" : "uri"
          }
        }
      }
    }
  }
}